<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
<form action="http://127.0.0.1:3000/api/users/uploads" method="post" enctype="multipart/form-data">
    <input type="file" name="headimg"/>
    <button type="submit">提交</button>
</form>
<hr>

<button onclick="gx()">更新用户信息</button>
<hr>
<button onclick="login()">登入</button>
</body>
<script>
    axios.interceptors.response.use(function (res){
        return res.data;
    });

    axios.interceptors.request.use(function (res){
        let token=sessionStorage.getItem('token');
        res.headers.Authorization=token;
        return res;
    })

async function login() {
    let res = await axios.post('http://localhost:3000/api/users/login', {
        username: 'admin2',
        password: 'admin'
    });
    sessionStorage.setItem('token',res.data.token);
}

async function gx() {
    let res = await axios.put('http://localhost:3000/api/users/updateuser', {
        nickname: '羡羡201',
        headimg: 'https://'
    });
    console.log(res);
    console.log(res.data.nickname);
}
</script>
</html>
